{% extends "base.html" %}
{% set category = "login" %}
{% block title %}register_user{% endblock %}
{% block head %}
    {{ super() }}
    <link rel="stylesheet" type="text/css" href="/static/Pikaday/pikaday.css" />
{% endblock %}
{% block content %}

{% from "security/_macros.html" import render_field_with_errors %}
<form action="{{ url_for_security('register') }}" method="POST" name="register_user_form" class="cf">
    {{ register_user_form.hidden_tag() }}
    <h2>Login info</h2>
      {{ render_field_with_errors(register_user_form.email) }}
    {{ render_field_with_errors(register_user_form.password) }}
    <h2>Personal info</h2>
    {{ render_field_with_errors(register_user_form.name) }}
    {{ render_field_with_errors(register_user_form.date_of_birth) }}
    {{ render_field_with_errors(register_user_form.street) }}
    {{ render_field_with_errors(register_user_form.number) }}
    {{ render_field_with_errors(register_user_form.bus) }}
    {{ render_field_with_errors(register_user_form.postalcode) }}
    {{ render_field_with_errors(register_user_form.city) }}
    {{ render_field_with_errors(register_user_form.telephone) }}
    <h2>My motivation to become a member</h2>
    <p>
        {{ register_user_form.motivation.label }}
        {{ register_user_form.motivation(rows=5,style="width:100%")|safe }}
        {%- if register_user_form.motivation.errors -%}
            {%- for error in register_user_form.motivation.errors -%}
                <span style="color: red; display: block;">{{ error }}</span>
            {%- endfor -%}
        {%- endif -%}
    </p>
    <h2>Privacy settings</h2>
    {{ render_field_with_errors(register_user_form.show_telephone) }}
    {{ render_field_with_errors(register_user_form.show_email) }}
    {{ register_user_form.submit }}
</form>
<script src="/static/Pikaday/moment.js"></script>
<script src="/static/Pikaday/pikaday.js"></script>
<script>
    var picker = new Pikaday({
        field: document.getElementById('date_of_birth'),
        format: 'YYYY-MM-DD',
        onSelect: function() {
            console.log(this.getMoment().format('YYYY-MM-DD'));
        }
    });
</script>
{% endblock %}
